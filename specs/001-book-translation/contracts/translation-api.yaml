# Translation API Contract

## Overview
REST API for translating book content while preserving technical elements like code blocks and technical terms.

## Base URL
`/api/v1/translation`

## Endpoints

### POST /translate
Translates content from source language to target language while preserving technical elements.

#### Request
```json
{
  "source_content": "string (content to translate)",
  "source_language": "string (source language code)",
  "target_language": "string (target language code)",
  "preserve_formatting": "boolean (default: true)",
  "preserve_code_blocks": "boolean (default: true)",
  "preserve_technical_terms": "boolean (default: true)"
}
```

#### Response (Success - 200 OK)
```json
{
  "id": "string (unique identifier for translated content)",
  "original_request_id": "string (reference to the request)",
  "translated_content": "string (the translated content)",
  "detected_technical_elements": "array (list of preserved elements)",
  "translation_quality_score": "number (0-100 confidence score)",
  "processing_time_ms": "number (time taken to process)",
  "timestamp": "string (ISO 8601 timestamp)"
}
```

#### Response (Error - 400 Bad Request)
```json
{
  "error": "string (error message)",
  "code": "string (error code)",
  "details": "object (additional error details)"
}
```

#### Validation
- `source_language` and `target_language` must be in supported languages list
- `source_content` must not exceed 5,000 words
- `target_language` must be different from `source_language`

### GET /supported-languages
Retrieves the list of supported languages for translation.

#### Response (Success - 200 OK)
```json
{
  "languages": [
    {
      "language_code": "string (e.g., 'en', 'es', 'fr', 'ar', 'ur')",
      "language_name": "string (e.g., 'English', 'Spanish')",
      "is_enabled": "boolean",
      "technical_term_support": "string ('full', 'partial', 'none')"
    }
  ]
}
```

### POST /translate-selection
Translates a selected portion of content while maintaining context with the surrounding document.

#### Request
```json
{
  "full_content": "string (complete document content)",
  "selection_start": "number (start index of selected text)",
  "selection_end": "number (end index of selected text)",
  "source_language": "string (source language code)",
  "target_language": "string (target language code)"
}
```

#### Response (Success - 200 OK)
```json
{
  "id": "string (unique identifier for translated content)",
  "original_request_id": "string (reference to the request)",
  "translated_selection": "string (only the translated selected portion)",
  "context_preserved_content": "string (full content with only selection translated)",
  "detected_technical_elements": "array (list of preserved elements)",
  "translation_quality_score": "number (0-100 confidence score)",
  "processing_time_ms": "number (time taken to process)",
  "timestamp": "string (ISO 8601 timestamp)"
}
```

## Error Codes
- `TRANSLATION_LIMIT_EXCEEDED`: Content exceeds 5,000 words
- `UNSUPPORTED_LANGUAGE`: Requested language is not supported
- `INVALID_CONTENT`: Content contains invalid characters or structure
- `TRANSLATION_FAILED`: Translation service encountered an error
- `MALFORMED_REQUEST`: Request body doesn't match expected schema

## Authentication
No authentication required for basic translation functionality.

## Rate Limiting
API endpoints may be subject to rate limiting to prevent abuse.